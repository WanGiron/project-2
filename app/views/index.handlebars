<br>
<br>
<div class="container-fluid">
    <div class="row">
        <div class="col-1"></div>
        <div class="col-5 text-center">
            <div class="row">
                <div class="title-first title-box"><span class="letters">D</span></div>
                <div class="title-second title-box"><span class="letters">A</span></div>
                <div class="title-third title-box"><span class="letters">Y</span></div>
                <div class="title-fourth title-box"><span class="letters">C</span></div>
                <div class="title-fifth title-box"><span class="letters">A</span></div>
                <div class="title-sixth title-box"><span class="letters">R</span></div>
                <div class="title-seventh title-box"><span class="letters">E</span></div>
                <!-- <div style="content:' ';"></div>
                    <div class="title-eighth title-box"><span class="letters">C</span></div>
                    <div class="title-ninth title-box"><span class="letters">E</span></div>
                    <div class="title-tenth title-box"><span class="letters">N</span></div>
                    <div class="title-ninth title-box"><span class="letters">T</span></div>
                    <div class="title-tenth title-box"><span class="letters">E</span></div>
                    <div class="title-tenth title-box"><span class="letters">R</span></div> -->
            </div>
        </div>
        <div class="col-1"></div>
        <div class="col-3 text-center">
            <h1>Admin Access Only</h1>
        </div>
        <div class="col-1"></div>
    </div>
</div>
<br>
<br>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    {{!-- <a class="navbar-brand" href="#">Navbar</a> --}}
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">

            <li class="nav-item">
                <a class="nav-link" href="#" data-toggle="modal" data-target="#add-child">New Client</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-toggle="modal" data-target="#add-activity">Activity Update</a>
            </li>

        </ul>
    </div>
</nav>
<br>
<br>
<div class="container">
    <div class="row">
        <div class="col-3 text-center div-id-number" id="child-information-div">
            {{!-- empty --}}
        </div>

        <div class="col-5 text-center div-children-names">
            <h2>Children Name</h2>
            <hr>
            <div class="row">
                <div class="col-12 text-justify main-child-box">
                    <br>

                            <h4 class="child-activity" value="{{child_name}}">{{child_name}} {{child_last_name}}</h4>
                            <a href="/api/admin-activity-site/{{child_name}}"><button
                                    class="child-activity-info btn btn-outline-secondary btn-sm">Daily
                                    Acitivities</button></a>
                            <a href="/api/admin-message-site/{{child_name}}"><button
                                    class="child-activity-info btn btn-outline-info btn-sm">Messages</button></a>

                        {{/each}}
                    </ul>
                </div>
            </div>
        </div>



        <div class="col-4 text-center div-parent-name">

            <hr>
            <div class="row">
                <ul class="scroll-list">
                    <li>
                        <div class="col-12 text-center" id="messages-here">
                            <br>
                    </li>
            </div>
            </ul>
        </div>
    </div>
</div>
</div>

<div class="col-1"></div>
</div>
</div>


<div class="modal fade" id="add-child" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Add Child
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="/" id="new-child-form">
                <div class="modal-body text-justify">
                    {{!-- To add new child to data base --}}
                    <label for="child-name">Child Name</label>
                    <input id="child-name-input" class="to-validate" type="text" placeholder="Child's name here"
                        required>
                    <br>
                    <label for="child-last-name">Last Name</label>
                    <input id="last-name-input" class="to-validate" type="text" placeholder="Child's last name here"
                        required>
                    <br>
                    <label for="child-dob">Date of birth</label>
                    <input id="dob" type="date" class="to-validate" placeholder="yyyy/mm/dd" required>
                    <br>
                    <label for="parent-name">Parent Name</label>
                    <input id="add-parent" type="text" class="to-validate" placeholder="Parent's name here" required>
                </div>
                <div class="modal-footer">
                    <button id="get-one" type="submit"> add child</button>
                </div>
            </form>

        </div>
    </div>
</div>

<div class="modal fade" id="add-activity" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLongTitle">Add Activity
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body text-center">
                <form id="new-activity-form" action="/">
                    <div class="">
                        <label for="specific-child">Child Name</label>
                        <select id="child-name-activity" required>
                            <option aria-placeholder="select-One">Select One</option>
                            {{#each data}}
                            <option value="{{child_name}}">{{child_name}}</option>
                            {{/each}}
                        </select>
                    </div>
                    <div>
                        <label for="activity">Activity</label>
                        <select id="admin-activity-select" type="text" placeholder="Type activity" required>
                            <option value="text" aria-placeholder="Select one">Select One</option>
                            <option value="Meals">Meals</option>
                            <option value="Snack">Snack</option>
                            <option value="Play time">Play time</option>
                            <option value="Learning">Learning</option>
                            <option value="Nap time">Nap time</option>
                            <option value="Daiper">Daiper</option>
                        </select>
                    </div>
                    <div class="">
                        <label for="activity">Activity</label>
                        <input id="admin-activity" class="to-validate" type="text" placeholder="Type activity" required>
                    </div>
                    <div class="modal-footer">
                        <button id="submit-activity" class="btn btn-dark" type="submit">Add activity</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>


<script>
    //window.setInterval(function() {
    //$("#messages-here").empty();
    $.ajax({ url: "/api/administrator/messages", method: "GET" })
        .then(function (results2) {
            //console.log(results2);
            for (i = 0; i < results2.length; i++) {
                //console.log(results2[i]);
                var messageDiv = $("<div class='alert alert-success alert-dismissible'>");
                var close = $("<a href='#' class='close' data-dismiss='alert' aria-label='close'>&times;</a>");
                var messageText = $("<p class='message-body'>");
                var messageChild = $("<h4 class='message-child-name'>");
                messageChild.text(results2[i].child_name);
                messageText.text(results2[i].message_from_parent);
                messageDiv.append(messageChild);
                messageDiv.append(messageText);
                messageDiv.append(close);
                $("#messages-here").prepend(messageDiv);

                //for select tab//
                var selectTag = $("<select id='child-name-activity'>");
                var optionTag = $("<option>");
                optionTag.text(results2[i].child_name);
                selectTag.append(optionTag);
                $("#select-option-here").append(selectTag);
            }
        });
    //}, 1000)

    $(".child-info").on("click", function (event) {
        event.preventDefault();
        $("#child-information-div").empty();
        var childInfoValue = $(this).val();
        $.ajax({ url: "/api/administrator/child-information", method: "GET" })
            .then(function (results) {
                console.log(results);
                var results1 = results;
                //for (i = 0; i < results1.length; i++) {

                var item = results1.filter(function (results1) {
                    return results1.child_name === childInfoValue;
                });

                console.log(childInfoValue);
                var newDiv = $("<div class='child-info'>");
                var line = $("<li>");
                line.text("Name: " + item[0].child_name);
                var line1 = $("<li>");
                line1.text("Last Name: " + item[0].child_last_name);
                var line2 = $("<li>");
                line2.text("Date of Birth: " + item[0].date_of_birth);
                var line3 = $("<li>");
                line3.text("Parent's Name: " + item[0].parent_name);
                newDiv.append(line, line1, line2, line3);
                $("#child-information-div").append(newDiv);

                //};

            });

    })





</script>